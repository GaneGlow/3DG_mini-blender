<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.MenuBar?>
<?import javafx.scene.control.Menu?>
<?import javafx.scene.control.MenuItem?>
<?import javafx.scene.input.KeyCodeCombination?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.canvas.Canvas?>

<?import javafx.scene.layout.VBox?>
<?import javafx.scene.control.CheckBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.control.Button?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Spinner?>

<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.ListView?>
<AnchorPane fx:id="anchorPane" xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.cgvsu.gui.GuiController"
            styleClass="root-pane"
            stylesheets="@styles.css">

    <!-- Контейнер для Canvas -->
    <StackPane styleClass="canvas-container"
               AnchorPane.leftAnchor="0"
               AnchorPane.topAnchor="30"
               AnchorPane.bottomAnchor="30"
               AnchorPane.rightAnchor="250">

        <Canvas fx:id="canvas" width="1020" height="800"/>

    </StackPane>

    <!-- Правая панель управления -->
    <ScrollPane styleClass="right-panel-scroll"
                AnchorPane.topAnchor="30"
                AnchorPane.bottomAnchor="30"
                AnchorPane.rightAnchor="0"
                prefWidth="250"
                fitToWidth="true"
                hbarPolicy="NEVER">

        <VBox fx:id="rightPanel" styleClass="right-panel-content">
            <Label fx:id="panelTitle" styleClass="right-panel-text" text="Настройки модели"/>

            <VBox alignment="CENTER_LEFT" spacing="5" styleClass="list">
                <Label text="Модели на сцене" styleClass="label-text"/>
                <ListView fx:id="modelsListView" prefHeight="100" styleClass="list"/>
            </VBox>


            <VBox styleClass="settings-panel">
                <CheckBox fx:id="wireframeCheckBox" text="Рисовать сетку" styleClass="check-box"/>
                <CheckBox fx:id="textureCheckBox" text="Использовать текстуру" styleClass="check-box"/>
                <CheckBox fx:id="lightingCheckBox" text="Использовать освещение" styleClass="check-box"/>

                <CheckBox fx:id="polygonCheckBox" text="Выделять полигоны" styleClass="check-box"/>
                <CheckBox fx:id="vertexCheckBox" text="Выделять вершины" styleClass="check-box"/>

                <Button fx:id="deleteSelectedButton"
                        text="Удалить"
                        onAction="#onDeleteSelectedButtonClick"
                        styleClass="button"
                        maxWidth="Infinity">
                    <padding>
                        <Insets top="10" right="15" bottom="10" left="15"/>
                    </padding>
                </Button>
        </VBox>

                <VBox styleClass="parameter-panel" spacing="8">
                    <Label text="Перемещение:" styleClass="parameter-label"/>
                    <HBox spacing="5" alignment="CENTER_LEFT">
                        <Label text="X:" styleClass="unit-label"/>
                        <Spinner fx:id="translationXSpinner"
                                 styleClass="parameter-spinner"
                                 prefWidth="120">
                        </Spinner>
                        <Label text="ед." styleClass="unit-label"/>
                    </HBox>
                    <HBox spacing="5" alignment="CENTER_LEFT">
                        <Label text="Y:" styleClass="unit-label"/>
                        <Spinner fx:id="translationYSpinner"
                                 styleClass="parameter-spinner"
                                 prefWidth="120">
                        </Spinner>
                        <Label text="ед." styleClass="unit-label"/>
                    </HBox>
                    <HBox spacing="5" alignment="CENTER_LEFT">
                        <Label text="Z:" styleClass="unit-label"/>
                        <Spinner fx:id="translationZSpinner"
                                 styleClass="parameter-spinner"
                                 prefWidth="120">
                        </Spinner>
                        <Label text="ед." styleClass="unit-label"/>
                    </HBox>
                    <Button fx:id="deleteTranslationButton"
                            text="Сбросить настройки"
                            onAction="#onResetTranslationButtonClick"
                            styleClass="button"
                            maxWidth="Infinity">
                        <padding>
                            <Insets top="10" right="15" bottom="10" left="15"/>
                        </padding>
                    </Button>
                </VBox>

                <VBox styleClass="parameter-panel" spacing="8">
                    <Label text="Вращение:" styleClass="parameter-label"/>
                    <HBox spacing="5" alignment="CENTER_LEFT">
                        <Label text="X:" styleClass="unit-label"/>
                        <Spinner fx:id="rotationXSpinner"
                                 styleClass="parameter-spinner"
                                 prefWidth="120">
                        </Spinner>
                        <Label text="°" styleClass="unit-label"/>
                    </HBox>
                    <HBox spacing="5" alignment="CENTER_LEFT">
                        <Label text="Y:" styleClass="unit-label"/>
                        <Spinner fx:id="rotationYSpinner"
                                 styleClass="parameter-spinner"
                                 prefWidth="120">
                        </Spinner>
                        <Label text="°" styleClass="unit-label"/>
                    </HBox>
                    <HBox spacing="5" alignment="CENTER_LEFT">
                        <Label text="Z:" styleClass="unit-label"/>
                        <Spinner fx:id="rotationZSpinner"
                                 styleClass="parameter-spinner"
                                 prefWidth="120">
                        </Spinner>
                        <Label text="°" styleClass="unit-label"/>
                    </HBox>
                    <Button fx:id="deleteRotationButton"
                            text="Сбросить настройки"
                            onAction="#onResetRotationButtonClick"
                            styleClass="button"
                            maxWidth="Infinity">
                        <padding>
                            <Insets top="10" right="15" bottom="10" left="15"/>
                        </padding>
                    </Button>
                </VBox>

                <VBox styleClass="parameter-panel" spacing="8">
                    <Label text="Масштабирование:" styleClass="parameter-label"/>
                    <HBox spacing="5" alignment="CENTER_LEFT">
                        <Label text="X:" styleClass="unit-label"/>
                        <Spinner fx:id="scaleXSpinner"
                                 styleClass="parameter-spinner"
                                 prefWidth="120">
                        </Spinner>
                        <Label text="в %" styleClass="unit-label"/>
                    </HBox>
                    <HBox spacing="5" alignment="CENTER_LEFT">
                        <Label text="Y:" styleClass="unit-label"/>
                        <Spinner fx:id="scaleYSpinner"
                                 styleClass="parameter-spinner"
                                 prefWidth="120">
                        </Spinner>
                        <Label text="в %" styleClass="unit-label"/>
                    </HBox>
                    <HBox spacing="5" alignment="CENTER_LEFT">
                        <Label text="Z:" styleClass="unit-label"/>
                        <Spinner fx:id="scaleZSpinner"
                                 styleClass="parameter-spinner"
                                 prefWidth="120">
                        </Spinner>
                        <Label text="в %" styleClass="unit-label"/>
                    </HBox>
                    <Button fx:id="deleteScaleButton"
                            text="Сбросить настройки"
                            onAction="#onResetScaleButtonClick"
                            styleClass="button"
                            maxWidth="Infinity">
                        <padding>
                            <Insets top="10" right="15" bottom="10" left="15"/>
                        </padding>
                    </Button>
                </VBox>

                <!-- Пустой элемент для заполнения пространства -->
                <Region VBox.vgrow="ALWAYS"/>
            </VBox>

    </ScrollPane>

    <!-- MenuBar -->
    <MenuBar styleClass="menu-bar"
             AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0" AnchorPane.topAnchor="0">

        <!-- Menu "Файл" -->
        <Menu mnemonicParsing="false" text="Файл" styleClass="menu">
            <MenuItem mnemonicParsing="false" onAction="#onOpenModelMenuItemClick" text="Загрузить модель"
                      styleClass="menu-item">
                <accelerator>
                    <KeyCodeCombination alt="UP" control="DOWN" meta="UP" shift="UP" shortcut="UP" code="F"/>
                </accelerator>
            </MenuItem>
            <MenuItem mnemonicParsing="false" onAction="#onOpenTextureMenuItemClick" text="Загрузить текстуру"
                      styleClass="menu-item">
                <accelerator>
                    <KeyCodeCombination alt="UP" control="DOWN" meta="UP" shift="UP" shortcut="UP" code="T"/>
                </accelerator>
            </MenuItem>
            <MenuItem mnemonicParsing="false" onAction="#onExitMenuItemClick" text="Сохранить без изменений"
                      styleClass="menu-item">
                <!--вместо #onExitMenuItemClick надо написать название своего
                      метода для сохранения модели без изменений-->
                <accelerator>
                    <KeyCodeCombination alt="UP" control="DOWN" meta="UP" shift="UP" shortcut="UP" code="S"/>
                </accelerator>
            </MenuItem>
            <MenuItem mnemonicParsing="false" onAction="#onExitMenuItemClick" text="Сохранить с изменениями"
                      styleClass="menu-item">
                <!--вместо #onExitMenuItemClick надо написать название своего
                      метода для сохранения модели с изменениями-->
                <accelerator>
                    <KeyCodeCombination alt="UP" control="DOWN" meta="UP" shift="DOWN" shortcut="UP" code="S"/>
                </accelerator>
            </MenuItem>
            <MenuItem mnemonicParsing="false" onAction="#onExitMenuItemClick" text="Закрыть окно"
                      styleClass="menu-item">
                <accelerator>
                    <KeyCodeCombination alt="UP" control="UP" meta="UP" shift="UP" shortcut="UP" code="ESCAPE"/>
                </accelerator>
            </MenuItem>
        </Menu>

        <!-- Menu "Камера" -->
        <Menu mnemonicParsing="false" text="Камера" styleClass="menu">
            <MenuItem mnemonicParsing="false" onAction="#handleCameraForward" text="Вперед"
                      styleClass="menu-item">
                <accelerator>
                    <KeyCodeCombination alt="UP" control="UP" meta="UP" shift="UP" shortcut="UP" code="UP"/>
                </accelerator>
            </MenuItem>

            <MenuItem mnemonicParsing="false" onAction="#handleCameraBackward" text="Назад"
                      styleClass="menu-item">
                <accelerator>
                    <KeyCodeCombination alt="UP" control="UP" meta="UP" shift="UP" shortcut="UP" code="DOWN"/>
                </accelerator>
            </MenuItem>

            <MenuItem mnemonicParsing="false" onAction="#handleCameraLeft" text="Влево"
                      styleClass="menu-item">
                <accelerator>
                    <KeyCodeCombination alt="UP" control="UP" meta="UP" shift="UP" shortcut="UP" code="LEFT"/>
                </accelerator>
            </MenuItem>

            <MenuItem mnemonicParsing="false" onAction="#handleCameraRight" text="Вправо"
                      styleClass="menu-item">
                <accelerator>
                    <KeyCodeCombination alt="UP" control="UP" meta="UP" shift="UP" shortcut="UP" code="RIGHT"/>
                </accelerator>
            </MenuItem>

            <MenuItem mnemonicParsing="false" onAction="#handleCameraUp" text="Вверх"
                      styleClass="menu-item">
                <accelerator>
                    <KeyCodeCombination alt="UP" control="UP" meta="UP" shift="UP" shortcut="UP" code="W"/>
                </accelerator>
            </MenuItem>

            <MenuItem mnemonicParsing="false" onAction="#handleCameraDown" text="Вниз"
                      styleClass="menu-item">
                <accelerator>
                    <KeyCodeCombination alt="UP" control="UP" meta="UP" shift="UP" shortcut="UP" code="S"/>
                </accelerator>
            </MenuItem>
        </Menu>

        <!-- Меню вид -->
        <Menu mnemonicParsing="false" text="Вид" styleClass="menu" fx:id="viewMenu">

            <MenuItem mnemonicParsing="false"
                      onAction="#onAddCamera"
                      text="Добавить камеру"
                      styleClass="menu-item"
                      fx:id="addCameraMenuItem">

                <accelerator>
                    <KeyCodeCombination
                            alt="DOWN"
                            control="UP"
                            meta="UP"
                            shift="UP"
                            shortcut="UP"
                            code="A"/>
                </accelerator>

            </MenuItem>
        </Menu>

    </MenuBar>

    <HBox fx:id="bottomPanel"
          styleClass="bottom-panel"
          AnchorPane.bottomAnchor="0"
          AnchorPane.leftAnchor="0"
          AnchorPane.rightAnchor="0"
          prefHeight="30">

        <Label fx:id="modelInfoLabel"
               text="Модель не загружена"
               styleClass="model-info-label"/>

        <!-- Растягивающийся разделитель -->
        <Region HBox.hgrow="ALWAYS"/>

        <!-- Информация о текстуре (справа) -->
        <Label fx:id="textureInfoLabel"
               text="Текстура не загружена"
               styleClass="texture-info-label"/>

    </HBox>

</AnchorPane>